<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <title>{{ movie_details[7] }}</title>
      <!-- Google Fonts -->
      <link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans&display=swap" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap" rel="stylesheet">
      <!-- Font Awesome -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      <!-- Bootstrap -->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
      <!-- Auto Complete -->
      <!--<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@7.2.0/dist/css/autoComplete.min.css">-->
      <!-- jQuery -->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
      <!-- External CSS -->
      <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
      <script type="text/javascript">
         var films = {{suggestions|tojson}};
      </script>
      <style>
         #loader {
         display: none;
         position: fixed;
         z-index: 100;
         left: 0;
         top:0;
         width: 100%;
         height: 100%;
         background-image: url('../static/Search.gif');
         /* background-size: 20%;*/
         background-position: 50% 50%;
         background-color: rgba(255, 255, 255, 1);
         background-repeat: no-repeat;
         -webkit-transition: background-image 0.2s ease-in-out;
         transition: background-image 0.2s ease-in-out;
         }
      </style>
   </head>
   <body></body>
   {% if error|length > 0 %}
   <div id="content" style="background-image: url(../static/images/bg.jpeg); height: 100vh;">
      <center>
      <a href="https://github.com/THARUNESHWAR-369" target="_blank" class="github-corner" title="View source on GitHub">
         <svg data-toggle="tooltip" data-placement="left" width="80" height="80" viewBox="0 0 250 250" style="fill:coral; color:#fff; position: fixed;z-index:100; top: 0; border: 0; right: 0;" aria-hidden="true">
            <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
            <path
               d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
               fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
            <path
               d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
               fill="currentColor" class="octo-body"></path>
         </svg>
      </a>
      <center class="main-buttons">
         <br>
         <form id="search_bar_form" action="/" method="post">
            <input class="search-field" type="text" name="search-field" placeholder="search movie" id="autoComplete" autocomplete="off" required>
            <div class="my_home_btn" style="padding: 15px">
               <button class="search-btn home-btn" id="submit">
               <i class="fas fa-search home-icon"></i>
               </button>
               <!--<button class="voice-btn home-btn">
                  <i class="fas fa-microphone home-icon"></i>
                  </button>-->
            </div>
         </form>
         <br>
         <div class="error">
            <h1 style="color: coral;font-size: xx-large;text-shadow: 0px 0px 3px #00000082, -1px -1px 3px #00000080;">{{ error }}</h1>
         </div>
      </center>
   </div>
   {% endif %}
   {% if error|length == 0 %}
   <div id="content" style="background-image: url(../static/images/bg.jpeg);">
      <a href="https://github.com/THARUNESHWAR-369" target="_blank" class="github-corner" title="View source on GitHub">
         <svg data-toggle="tooltip" data-placement="left" width="80" height="80" viewBox="0 0 250 250" style="fill:coral; color:#fff; position: fixed;z-index:100; top: 0; border: 0; right: 0;" aria-hidden="true">
            <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
            <path
               d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
               fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
            <path
               d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
               fill="currentColor" class="octo-body"></path>
         </svg>
      </a>
      <center class="main-buttons">
         <br>
         <form id="search_bar_form" action="/" method="post">
            <input class="search-field" type="text" name="search-field" placeholder="search movie" id="autoComplete" autocomplete="off" required>
            <div class="my_home_btn" style="padding: 15px">
               <button class="search-btn home-btn" id="submit" onclick="load_loader(this)">
               <i class="fas fa-search home-icon"></i>
               </button>
            </div>
         </form>
      </center>
      <h1 id="movie_name" style="text-align: center; text-transform: uppercase; padding: 30px">{{ movie_details[7] }}</h1>
      <div class="poster-sm text-center">
         <img class="poster" style="border-radius: 12px;margin-bottom: 5%;" height="400" width="250" src={{ movie_poster }}>
      </div>
      <div id="details">
         <h6 id="text-shadow" style="color:white;text-shadow: 2px -3px 5px #000000, 3px 4px 5px #000000;"><label style="color: coral">TITLE:</label> &nbsp;{{ movie_details[7] }}</h6>
         <h6 id="text-shadow" style="color:white;max-width: 85%;text-shadow: 2px -3px 5px #000000, 3px 4px 5px #000000;"><label style="color: coral">OVERVIEW:</label> &nbsp;&nbsp;{{ movie_details[2] }}</h6>
         <h6 id="text-shadow" style="color:white;text-shadow: 2px -3px 5px #000000, 3px 4px 5px #000000;"><label style="color: coral">RATING:</label> &nbsp;{{ movie_details[6] }}/10 (votes)</h6>
         <h6 id="text-shadow" style="color:white;text-shadow: 2px -3px 5px #000000, 3px 4px 5px #000000;"><label style="color: coral">GENRE:</label> &nbsp;{{ movie_details[5] }}</h6>
         <h6 id="text-shadow" style="color:white;text-shadow: 2px -3px 5px #000000, 3px 4px 5px #000000;"><label style="color: coral">RELEASE DATE:</label> &nbsp;{{ movie_details[0] }}</h6>
         <h6 id="text-shadow" style="color:white;text-shadow: 2px -3px 5px #000000, 3px 4px 5px #000000;"><label style="color: coral">RUNTIME:</label> &nbsp;{{ movie_details[3] }}</h6>
         <h6 id="text-shadow" style="color:white;text-shadow: 2px -3px 5px #000000, 3px 4px 5px #000000;"><label style="color: coral">STATUS:</label> &nbsp;{{ movie_details[4] }}</h6>
         {% if movie_details[1] != 0 %}
         <h6 id="text-shadow" style="color:white;text-shadow: 2px -3px 5px #000000, 3px 4px 5px #000000;"><label style="color: coral">BUDGET:</label> &nbsp;{{ movie_details[1] }}</h6>
         {% endif %}
      </div>
      {% for movie_cast in movie_casts %}
      <div id="modal_{{ movie_cast[3][0][-1] }}" class="modal fade" role='dialog'>
         <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
               <div class="modal-header" style="background:#ff5415;color: white;">
                  <h5 class="modal-title" id="exampleModalLabel3" style="font-family: 'FontAwesome';font-weight: 900;">{{movie_cast[1]|title|upper}}</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="background: transparent;border: none;">
                  <span aria-hidden="true" style="color: black;font-size:30px">&times;</span>
                  </button>
               </div>
               <div class="modal-body" style="background: coral">
                  <div class="img-container" style="text-align: center;">
                     <img style="border-radius: 8px;margin: 20px 0px;width: 230px;height: 360px;box-shadow: 1px 1px 5px 1px #0000003b, -1px -1px 5px 1px #0000002b;" class="profile-pic" src="{{movie_cast[0]}}" alt="{{movie_cast[1]}} - profile" style="width: 250px;height:400px;border-radius: 10px;" />
                  </div>
                  <div style="margin-left: 20px">
                     {% if movie_cast[3][0][1] == none %}
                         <p><strong>Birthday:</strong> Not Available!</p>
                     {% endif %}
                     {% if movie_cast[3][0][1] != none %}
                         <p><strong>Birthday:</strong> {{ movie_cast[3][0][1] }}</p>
                     {% endif %}

                     {% if movie_cast[3][0][2] == none %}
                         <p><strong>Place of Birth:</strong> Not Available! </p>
                     {% endif %}
                     {% if movie_cast[3][0][2] != none %}
                         <p><strong>Place of Birth:</strong> {{ movie_cast[3][0][2] }} </p>
                     {% endif %}

                     {% if movie_cast[3][0][0]  == none %}
                         <p><strong>Biography:</strong> Not Available! </p>
                     {% endif %}
                     {% if movie_cast[3][0][0] != none %}
                         <p><strong>Biography:</strong> {{movie_cast[3][0][0] }} </p>
                     {% endif %}

                  </div>
               </div>
               <div class="modal-footer" style="background: #ff5415">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal" style="color: white;background: transparent;border-color: white;">Close</button>
               </div>
            </div>
         </div>
      </div>
      <script>
         $('.close').click(function () {
            $('#modal_{{ movie_cast[3][0][-1] }}').modal('hide');
         });
         $('.btn-secondary').click(function () {
            $('#modal_{{ movie_cast[3][0][-1] }}').modal('hide');
         });
      </script>
      {% endfor %}
      <div class="movie" style="color: #E8E8E8;">
         <center>
            <h3 style="font-family: 'Rowdies', cursive;text-shadow: 2px -3px 5px #000000, 3px 4px 5px #000000;">TOP CAST</h3>
            <h5 style="font-family: 'Rowdies', cursive;color:coral;text-shadow: 2px 2px 2px #000000bd, 2px 2px 2px #000000d6;">(Click on the cast to know more)</h5>
         </center>
      </div>
      <br><br>
      <div class="container">
         <center>
            <div class="movie-content">
               <div class="container">
                  {% if movie_casts|length > 0 %}
                  {% for movie_cast in movie_casts %}
                  <div class="movie-content" style="margin: 30px;">
                     <div class="castcard card" style="width: 15rem;background: coral;border: none;" >
                        <div class="imghvr">
                           <img class="card-img-top cast-img" id="{{ movie_cast[1] }}" height="360" width="240" alt="{{ movie_cast[1] }} - profile" src="{{ movie_cast[0] }}">
                           <div class="fig" style="text-align: center">
                              <button id="btn" class="card-btn btn btn-danger" style="background: #ff5415;border: none;cursor: pointer;box-shadow: 3px 3px 3px 0px #00000047, -1px -1px 4px 0px #00000047;" title="{{ movie_cast[3][0][-1] }}" onclick="open_model(this)">Know More</button> <!-- data-bs-toggle="modal" data-bs-target="#staticBackdrop"-->
                           </div>
                        </div>
                        <div class="card-body">
                           <h5 class="card-title" style="font-weight: 800">{{ movie_cast[1]|title|upper }}</h5>
                           <h5 class="card-title">
                              <span style="color: #2d2d2d">
                                 Character: {{ movie_cast[2][0]|title|upper }}
                                 <p style="font-family: 'Britannic Bold';color: #2d2d2d">({{ movie_cast[2][1]|title|upper }})</p>
                              </span>
                           </h5>
                        </div>
                     </div>
                  </div>
                  <script>
                     function open_model(e) {
                         var title = e.getAttribute('title');
                         $('.model-body').html("<p>"+title+"</p>");
                         $('#modal_'+title).modal('show');
                     }
                  </script>
                  {% endfor %}
                  {% endif %}
               </div>
            </div>
            <div id="main"></div>
         </center>
         <br> <br>
         <center>
         {% if movie_review != none %}
            <h2 style="font-family: 'Rowdies', cursive;color:coral;text-shadow: 2px 2px 2px #000000bd, 2px 2px 2px #000000d6;">USER REVIEWS</h2>
            <div class="col-md-12" style="margin: 0 auto; margin-top:25px;">
               <table class="table table-bordered" bordercolor="white" style="color:white">
                  <thead>
                     <tr>
                        <th class="text-center" scope="col" style="width: 75%">Comments</th>
                        <th class="text-center" scope="col">Sentiments</th>
                     </tr>
                  </thead>
                  {% for review, status in  movie_review.items() if not movie_review.hidden %}
                  <tbody>
                     <tr style="background-color:#ff7f50ad;">
                        <td>{{ review }}</td>
                        <td>
                           <center>
                              {{ status }}
                              {% if status == 'Positive' %}
                              &#128515;
                              {% else %}
                              &#128534;
                              {% endif %}
                           </center>
                        </td>
                     </tr>
                     {% endfor %}
                  </tbody>
               </table>
            </div>
         {% endif %}
         {% if movie_review == none %}
             <h1 style="color: coral;font-size: xx-large;text-shadow: 0px 0px 3px #00000082, -1px -1px 3px #00000080;">No Review Available (:</h1>
         {% endif %}
         </center>
         <br>
         <div class="movie" style="color: #E8E8E8;">
            <center>
               <h2 style="font-family: 'Rowdies', cursive;text-shadow: 2px 2px 2px #000000bd, 2px 2px 2px #000000d6;">RECOMMENDED MOVIES FOR YOU</h2>
               <h5 style="font-family: 'Rowdies', cursive;color:coral;text-shadow: 2px 2px 2px #000000bd, 2px 2px 2px #000000d6;">(Click any of the movies to get recommendation)</h5>
            </center>
         </div>
         <br><br>
         <center>
            <div class="movie-content">
               {% if recommneded_movies|length != 0 %}
               {% for recommneded_movie in recommneded_movies %}
                  <div class="card" style="width: 14rem;display: inline-flex;margin: 20px;background: coral;border: none;">
                     <div class="imghvr">
                        <img class="card-img-top" height="360" width="240" alt="{{ recommneded_movie[1] }} - poster" src={{ recommneded_movie[0] }}>
                        <figcaption class="_fig">
                           <div class="card-img-overlay" >
                              <span class="card-text" style="font-size:15px;background: #000000b8;color:white;float: left;padding:2px 5px;border-radius: 10px;margin: -150px -116px"><span class="fa fa-star checked">&nbsp; {{recommneded_movie[2]}}/10</span></span>
                           </div>
                           <div class=".card-img-overlay" style="position: relative;">
                              <span class="card-text" style="font-size:15px;position:absolute;bottom:20px;left:-60px;background: #000000b8;color:white;padding: 5px;border-radius: 10px;margin:-210px -40px;">{{ recommneded_movie[3] }}</span>
                           </div>
                        </figcaption>
                     </div>
                     <div class="card-body">
                        <h5 class="card-title" style="font-family: 'Rowdies';font-size: 17px;font-weight: 800">{{ recommneded_movie[1]|title|upper }}</h5>
                     </div>
                  </div>
               {% endfor %}
               {% else %}
               <script>
                  //$('.card').css('display', 'none');
                  $('.movie').css('display', 'none');
               </script>
               <h1 style="color: coral;font-size: xx-large;text-shadow: 0px 0px 3px #00000082, -1px -1px 3px #00000080;">No Recommended Movie! Available (:</h1>
               {% endif %}
            </div>
            <br><br>
            <div class="gototop" style="float: right"><i title="Go to Top" class="fa fa-arrow-up"></i></div>
            <br>
            <script>
               $('.fa-arrow-up').click(function(){
                 $('html, body').animate({scrollTop:0}, 'slow');
               });
            </script>
      </div>
      <br>
   </div>
   </center>
   </div>
   {% endif %}
   <div id="loader"></div>
   <div class="result"></div>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
   <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
   <script src="https://kit.fontawesome.com/5df3aa6cb5.js" crossorigin="anonymous"></script>
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
   <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
   <script src="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@7.2.0/dist/js/autoComplete.min.js"></script>
   <script type="text/javascript" src="{{url_for('static', filename='js/autocomplete.js')}}"></script>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
   <script type="text/javascript" src="{{url_for('static', filename='js/recommend.js')}}"></script>
   </body>
</html>
